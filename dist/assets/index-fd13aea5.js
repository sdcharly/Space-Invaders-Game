(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))s(h);new MutationObserver(h=>{for(const r of h)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(h){const r={};return h.integrity&&(r.integrity=h.integrity),h.referrerPolicy&&(r.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?r.credentials="include":h.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(h){if(h.ep)return;h.ep=!0;const r=t(h);fetch(h.href,r)}})();class d{constructor(e,t){this.x=e,this.y=t,this.width=40,this.height=20,this.speed=5,this.dx=0}update(e){this.x+=this.dx*(e/16),this.x<0&&(this.x=0),this.x>800-this.width&&(this.x=800-this.width)}draw(e){e.fillStyle="#00ff00",e.beginPath(),e.moveTo(this.x+this.width/2,this.y),e.lineTo(this.x,this.y+this.height),e.lineTo(this.x+this.width,this.y+this.height),e.closePath(),e.fill()}moveLeft(){this.dx=-this.speed}moveRight(){this.dx=this.speed}stop(){this.dx=0}}class g{constructor(e,t){this.x=e,this.y=t,this.width=30,this.height=30,this.speed=1,this.dx=this.speed}update(e){this.x+=this.dx*(e/16),(this.x<=0||this.x+this.width>=800)&&(this.dx=-this.dx,this.y+=20)}draw(e){e.fillStyle="#ff0000",e.beginPath(),e.moveTo(this.x,this.y),e.lineTo(this.x+this.width/2,this.y+this.height),e.lineTo(this.x+this.width,this.y),e.lineTo(this.x+3*this.width/4,this.y+this.height/3),e.lineTo(this.x+this.width/4,this.y+this.height/3),e.closePath(),e.fill()}}class y{constructor(e,t){this.x=e,this.y=t,this.width=4,this.height=10,this.speed=7,this.markedForDeletion=!1}update(e){this.y-=this.speed*(e/16),this.y<0&&(this.markedForDeletion=!0)}draw(e){e.fillStyle="#ffffff",e.fillRect(this.x-this.width/2,this.y,this.width,this.height)}}class p{constructor(e,t){this.width=e,this.height=t,this.player=new d(e/2,t-30),this.invaders=[],this.bullets=[],this.score=0,this.gameState="start",this.level=1,this.playerName="",this.highScores=JSON.parse(localStorage.getItem("highScores"))||[],this.lastTime=0}update(e){const t=e-this.lastTime;this.lastTime=e,this.gameState==="playing"&&(this.player.update(t),this.bullets.forEach(s=>s.update(t)),this.invaders.forEach(s=>s.update(t)),this.bullets=this.bullets.filter(s=>!s.markedForDeletion),this.checkCollisions(),this.invaders.length===0&&this.nextLevel(),this.invaders.some(s=>s.y+s.height>this.player.y)&&this.gameOver())}draw(e){switch(e.fillStyle="black",e.fillRect(0,0,this.width,this.height),this.gameState){case"start":this.drawStartScreen(e);break;case"nameInput":this.drawNameInputScreen(e);break;case"playing":this.player.draw(e),this.bullets.forEach(t=>t.draw(e)),this.invaders.forEach(t=>t.draw(e)),this.drawHUD(e);break;case"paused":this.drawPausedScreen(e);break;case"gameOver":this.drawGameOverScreen(e);break}}drawStartScreen(e){e.fillStyle="white",e.font="40px Arial",e.textAlign="center",e.fillText("SPACE INVADERS",this.width/2,this.height/2-40),e.font="20px Arial",e.fillText("Press ENTER to start",this.width/2,this.height/2+40)}drawNameInputScreen(e){e.fillStyle="white",e.font="30px Arial",e.textAlign="center",e.fillText("Enter Your Name:",this.width/2,this.height/2-60),e.font="24px Arial",e.fillText(this.playerName+"|",this.width/2,this.height/2),e.font="20px Arial",e.fillText("Press ENTER when done",this.width/2,this.height/2+60)}drawPausedScreen(e){e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(0,0,this.width,this.height),e.fillStyle="white",e.font="40px Arial",e.textAlign="center",e.fillText("PAUSED",this.width/2,this.height/2),e.font="20px Arial",e.fillText("Press P to resume",this.width/2,this.height/2+40),e.fillText("Press ESC to quit",this.width/2,this.height/2+70)}drawGameOverScreen(e){e.fillStyle="white",e.font="40px Arial",e.textAlign="center",e.fillText("GAME OVER",this.width/2,this.height/2-80),e.font="24px Arial",e.fillText(`Player: ${this.playerName}`,this.width/2,this.height/2-30),e.fillText(`Final Score: ${this.score}`,this.width/2,this.height/2+10),e.fillText(`Level Reached: ${this.level}`,this.width/2,this.height/2+50),e.font="20px Arial",e.fillText("Press ENTER to restart",this.width/2,this.height/2+100),e.fillText("Press ESC to quit",this.width/2,this.height/2+130)}drawHUD(e){e.fillStyle="white",e.font="20px Arial",e.textAlign="left",e.fillText(`Player: ${this.playerName}`,10,30),e.fillText(`Score: ${this.score}`,10,60),e.textAlign="right",e.fillText(`Level: ${this.level}`,this.width-10,30)}handleKeyDown(e){switch(this.gameState){case"start":e.key==="Enter"&&(this.gameState="nameInput");break;case"nameInput":this.handleNameInput(e);break;case"playing":e.key==="ArrowLeft"&&this.player.moveLeft(),e.key==="ArrowRight"&&this.player.moveRight(),e.key===" "&&this.shoot(),(e.key==="p"||e.key==="P")&&this.togglePause(),e.key==="Escape"&&this.gameOver();break;case"paused":(e.key==="p"||e.key==="P")&&this.togglePause(),e.key==="Escape"&&this.gameOver();break;case"gameOver":e.key==="Enter"&&this.startGame(),e.key==="Escape"&&this.quitGame();break}}handleKeyUp(e){this.gameState==="playing"&&(e.key==="ArrowLeft"||e.key==="ArrowRight")&&this.player.stop()}handleNameInput(e){e.key==="Enter"&&this.playerName.trim()!==""?this.startGame():e.key==="Backspace"?this.playerName=this.playerName.slice(0,-1):e.key.length===1&&this.playerName.length<15&&(this.playerName+=e.key)}shoot(){this.bullets.length<3&&this.bullets.push(new y(this.player.x+this.player.width/2,this.player.y))}checkCollisions(){this.bullets.forEach(e=>{this.invaders.forEach(t=>{e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y&&(e.markedForDeletion=!0,t.markedForDeletion=!0,this.score+=10)})}),this.invaders=this.invaders.filter(e=>!e.markedForDeletion)}startGame(){this.gameState="playing",this.score=0,this.level=1,this.player=new d(this.width/2,this.height-30),this.invaders=this.createInvaders(),this.bullets=[]}gameOver(){this.gameState="gameOver",this.updateHighScores()}updateHighScores(){this.highScores.push({name:this.playerName,score:this.score,level:this.level}),this.highScores.sort((e,t)=>t.score-e.score),this.highScores=this.highScores.slice(0,5),localStorage.setItem("highScores",JSON.stringify(this.highScores))}nextLevel(){this.level++,this.invaders=this.createInvaders(),this.invaders.forEach(e=>e.speed*=1.2)}togglePause(){this.gameState=this.gameState==="playing"?"paused":"playing"}quitGame(){this.gameState="start",this.playerName=""}createInvaders(){const e=[];for(let t=0;t<5;t++)for(let s=0;s<10;s++)e.push(new g(s*50+50,t*40+80));return e}}const l=document.getElementById("gameCanvas"),m=l.getContext("2d");l.width=800;l.height=600;const a=new p(l.width,l.height);function f(i){a.update(i),a.draw(m),requestAnimationFrame(f)}f();document.addEventListener("keydown",i=>a.handleKeyDown(i));document.addEventListener("keyup",i=>a.handleKeyUp(i));let n=0;l.addEventListener("touchstart",i=>{n=i.touches[0].clientX});l.addEventListener("touchmove",i=>{i.preventDefault();const e=i.touches[0].clientX,t=e-n;t>10?a.player.moveRight():t<-10&&a.player.moveLeft(),n=e});l.addEventListener("touchend",()=>{a.player.stop()});l.addEventListener("click",()=>{a.gameState==="playing"?a.shoot():a.handleKeyDown({key:"Enter"})});
